<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="sk"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UserDetails.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">webjetcms</a> &gt; <a href="index.source.html" class="el_package">sk.iway.iwcm.users</a> &gt; <span class="el_source">UserDetails.java</span></div><h1>UserDetails.java</h1><pre class="source lang-java linenums">package sk.iway.iwcm.users;

import com.fasterxml.jackson.annotation.JsonIgnore;
import sk.iway.iwcm.Constants;
import sk.iway.iwcm.InitServlet;
import sk.iway.iwcm.Tools;
import sk.iway.iwcm.common.CloudToolsForCore;
import sk.iway.iwcm.common.ForumTools;
import sk.iway.iwcm.common.GalleryToolsForCore;
import sk.iway.iwcm.components.enumerations.EnumerationDataDB;
import sk.iway.iwcm.components.enumerations.model.EnumerationDataBean;
import sk.iway.iwcm.io.IwcmFile;

import javax.servlet.http.HttpServletRequest;

import java.io.Serializable;
import java.sql.ResultSet;
import java.util.*;

/**
 *  Drzi info o pouzivatelovi (z tabulky users)
 *
 *@Title        Interway Content Management
 *@Company      Interway s.r.o. (www.interway.sk)
 *@Copyright    Interway s.r.o. (c) 2001-2002
 *@author       $Author: jeeff $
 *@version      $Revision: 1.4 $
 *@created      $Date: 2004/03/08 14:53:59 $
 */
public class UserDetails implements Serializable
{
	/**
	 * Comment for &lt;code&gt;serialVersionUID&lt;/code&gt;
	 */
	private static final long serialVersionUID = 680672045576197626L;

<span class="fc" id="L37">	protected int userId = -1;</span>
<span class="fc" id="L38">	protected String login = &quot;&quot;;</span>
<span class="fc" id="L39">	protected boolean admin = false;</span>

<span class="fc" id="L41">	protected String company = &quot;&quot;;</span>
<span class="fc" id="L42">	protected String adress = &quot;&quot;;</span>
<span class="fc" id="L43">	protected String email = &quot;&quot;;</span>
<span class="fc" id="L44">	protected String country = &quot;&quot;;</span>
<span class="fc" id="L45">	protected String phone = &quot;&quot;;</span>
<span class="fc" id="L46">	protected String zipCode = &quot;&quot;;</span>
	protected boolean authorized;
	protected String userGroupsIds;
<span class="fc" id="L49">	protected String userGroupsNames=&quot;&quot;;</span>
<span class="fc" id="L50">	protected String city = &quot;&quot;;</span>
<span class="fc" id="L51">	protected String password = &quot;&quot;;</span>
<span class="fc" id="L52">	protected String oldPassword = &quot;&quot;;</span>
<span class="fc" id="L53">	protected String lastLogon = &quot;&quot;;</span>
<span class="fc" id="L54">	protected Date lastLogonAsDate = new Date();</span>
<span class="fc" id="L55">	protected String title = &quot;&quot;;</span>
<span class="fc" id="L56">	protected String firstName = &quot;&quot;;</span>
<span class="fc" id="L57">	protected String lastName = &quot;&quot;;</span>
<span class="fc" id="L58">	protected String fieldA = &quot;&quot;;</span>
<span class="fc" id="L59">	protected String fieldB = &quot;&quot;;</span>
<span class="fc" id="L60">	protected String fieldC = &quot;&quot;;</span>
<span class="fc" id="L61">	protected String fieldD = &quot;&quot;;</span>
<span class="fc" id="L62">	protected String fieldE = &quot;&quot;;</span>
	protected long regDate;
	protected String dateOfBirth;
<span class="fc" id="L65">	protected String photo = &quot;&quot;;</span>
<span class="fc" id="L66">	protected String signature = &quot;&quot;;</span>
<span class="fc" id="L67">	protected boolean sexMale = true;</span>
	protected int forumRank;
	protected int ratingRank;
	protected String editableGroups;
	protected String editablePages;
	protected String writableFolders;
<span class="fc" id="L73">	protected transient UserGroupVerify userGroupVerify = null;</span>
   // datumy kedy je platne prihlasenie
	protected String allowLoginStart;
	protected String allowLoginEnd;
<span class="fc" id="L77">	protected boolean allowDateLogin = true;</span>
<span class="fc" id="L78">	protected String fax = &quot;&quot;;</span>
<span class="fc" id="L79">	protected String deliveryFirstName = &quot;&quot;;</span>
<span class="fc" id="L80">	protected String deliveryLastName = &quot;&quot;;</span>
<span class="fc" id="L81">	protected String deliveryCompany = &quot;&quot;;</span>
<span class="fc" id="L82">	protected String deliveryAdress = &quot;&quot;;</span>
<span class="fc" id="L83">	protected String deliveryCity = &quot;&quot;;</span>
<span class="fc" id="L84">	protected String deliveryPsc = &quot;&quot;;</span>
<span class="fc" id="L85">	protected String deliveryCountry = &quot;&quot;;</span>
<span class="fc" id="L86">	protected String deliveryPhone = &quot;&quot;;</span>
<span class="fc" id="L87">	protected String position=&quot;&quot;;</span>
<span class="fc" id="L88">	protected int parentId=0;</span>
	protected String salt;
	protected String mobileDevice;

<span class="fc" id="L92">	protected transient Map&lt;String, SettingsBean&gt; settings = null;</span>
<span class="fc" id="L93">	protected transient Map&lt;String, SettingsAdminBean&gt; adminSettings = null;</span>

	//toto je specialita pre VUB kedy sa merguju nastavenia s default userom a chceme zamedzit zbytocnemu ukladaniu do DB
	//viz IawsDB
<span class="fc" id="L97">	protected boolean settingsDontSave = false;</span>

	/**
     * Prazdny konstruktor
    */
	public UserDetails()
<span class="fc" id="L103">	{</span>

<span class="fc" id="L105">	}</span>

	public UserDetails(ResultSet rs) throws Exception
<span class="fc" id="L108">	{</span>
<span class="fc" id="L109">		UsersDB.fillUserDetails(this, rs);</span>
<span class="fc" id="L110">	}</span>

	/**
     * Konstruktor z HTTP requestu
    */
	public UserDetails(HttpServletRequest request)
<span class="fc" id="L116">	{</span>
<span class="fc" id="L117">		userId = Tools.getIntValue(request.getParameter(&quot;userId&quot;), -1);</span>
<span class="fc" id="L118">		login = request.getParameter(&quot;login&quot;);</span>

<span class="fc" id="L120">		company = request.getParameter(&quot;company&quot;);</span>
<span class="pc bpc" id="L121" title="1 of 2 branches missed.">		if (request.getParameter(&quot;adress&quot;)!=null)</span>
		{
<span class="nc" id="L123">			adress = request.getParameter(&quot;adress&quot;);</span>
		}
		else
		{
<span class="fc" id="L127">			adress = request.getParameter(&quot;address&quot;);</span>
		}
<span class="fc" id="L129">		email = request.getParameter(&quot;email&quot;);</span>
<span class="fc" id="L130">		country = request.getParameter(&quot;country&quot;);</span>
<span class="fc" id="L131">		phone = request.getParameter(&quot;phone&quot;);</span>
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">		if (request.getParameter(&quot;PSC&quot;)!=null)</span>
		{
<span class="nc" id="L134">			zipCode = request.getParameter(&quot;PSC&quot;);</span>
		}
		else
		{
<span class="fc" id="L138">			zipCode = request.getParameter(&quot;psc&quot;);</span>
		}
<span class="fc" id="L140">		city = request.getParameter(&quot;city&quot;);</span>
<span class="fc" id="L141">		password = request.getParameter(&quot;password&quot;);</span>

<span class="fc" id="L143">		title = request.getParameter(&quot;title&quot;);</span>
<span class="fc" id="L144">		firstName = request.getParameter(&quot;firstName&quot;);</span>
<span class="fc" id="L145">		lastName = request.getParameter(&quot;lastName&quot;);</span>

<span class="fc" id="L147">		fieldA = request.getParameter(&quot;fieldA&quot;);</span>
<span class="fc" id="L148">		fieldB = request.getParameter(&quot;fieldB&quot;);</span>
<span class="fc" id="L149">		fieldC = request.getParameter(&quot;fieldC&quot;);</span>
<span class="fc" id="L150">		fieldD = request.getParameter(&quot;fieldD&quot;);</span>
<span class="fc" id="L151">		fieldE = request.getParameter(&quot;fieldE&quot;);</span>

<span class="fc" id="L153">		dateOfBirth = request.getParameter(&quot;dateOfBirth&quot;);</span>
<span class="fc" id="L154">		photo = request.getParameter(&quot;photo&quot;);</span>
<span class="fc" id="L155">		signature = request.getParameter(&quot;signature&quot;);</span>

<span class="fc" id="L157">		fax = request.getParameter(&quot;fax&quot;);</span>
<span class="fc" id="L158">		deliveryFirstName = request.getParameter(&quot;deliveryFirstName&quot;);</span>
<span class="fc" id="L159">		deliveryLastName = request.getParameter(&quot;deliveryLastName&quot;);</span>
<span class="fc" id="L160">		deliveryCompany = request.getParameter(&quot;deliveryCompany&quot;);</span>
<span class="fc" id="L161">		deliveryAdress = request.getParameter(&quot;deliveryAdress&quot;);</span>
<span class="fc" id="L162">		deliveryCity = request.getParameter(&quot;deliveryCity&quot;);</span>
<span class="fc" id="L163">		deliveryPsc = request.getParameter(&quot;deliveryPsc&quot;);</span>
<span class="fc" id="L164">		deliveryCountry = request.getParameter(&quot;deliveryCountry&quot;);</span>
<span class="fc" id="L165">		deliveryPhone = request.getParameter(&quot;deliveryPhone&quot;);</span>

<span class="fc" id="L167">		position = request.getParameter(&quot;position&quot;);</span>
<span class="fc" id="L168">		parentId = Tools.getIntValue(request.getParameter(&quot;parentId&quot;), 0);</span>

<span class="fc" id="L170">	}</span>

	/**
	 * Vrati true ak je pouzivatel v zadanej skupine
	 * @param userGroupId
	 * @return
	 */
	public boolean isInUserGroup(int userGroupId)
	{
<span class="fc" id="L179">		String test = &quot;,&quot;+getUserGroupsIds()+&quot;,&quot;;</span>
<span class="fc bfc" id="L180" title="All 2 branches covered.">		if (test.indexOf(&quot;,&quot;+userGroupId+&quot;,&quot;)!=-1)</span>
		{
<span class="fc" id="L182">			return(true);</span>
		}
<span class="fc" id="L184">		return(false);</span>
	}

	/**
	 * Vrati true ak je pouzivatel v zadanej skupine
	 * @param userGroupName
	 * @return
	 */
	public boolean isInUserGroup(String userGroupName)
	{
<span class="nc bnc" id="L194" title="All 2 branches missed.">		if ((&quot;,&quot;+getUserGroupsNames()+&quot;,&quot;).indexOf(&quot;,&quot;+userGroupName+&quot;,&quot;)!=-1) return true;</span>
<span class="nc" id="L195">		return false;</span>
	}

	/**
	 * Vrati custom nastavenia pouzivatela (z tabulky user_settings)
	 * @return
	 */
    @JsonIgnore
	public Map&lt;String, SettingsBean&gt; getSettings()
	{
<span class="fc bfc" id="L205" title="All 2 branches covered.">		if (settings == null) settings = UsersDB.getSettings(userId);</span>
<span class="fc" id="L206">		return settings;</span>
	}
    @JsonIgnore
	public Map&lt;String, SettingsBean&gt; getSettingsNotLoad()
	{
<span class="pc bpc" id="L211" title="1 of 2 branches missed.">		if (settings == null) return new TreeMap&lt;&gt;();</span>
<span class="fc" id="L212">		return settings;</span>
	}

	public void clearSettings()
	{
<span class="nc" id="L217">		settings = null;</span>
<span class="nc" id="L218">	}</span>

	/**
	 * Vrati custom nastavenia admin casti pouzivatela (z tabulky user_settings_admin) v mape, kde key je nazov nastavenia a value je objekt admin nastavenia SettingsAdminBean
	 */
	@JsonIgnore
	public Map&lt;String, SettingsAdminBean&gt; getAdminSettings()
	{
<span class="fc bfc" id="L226" title="All 2 branches covered.">		if (adminSettings == null)</span>
<span class="fc" id="L227">			adminSettings = SettingsAdminDB.getSettings(userId);</span>

<span class="fc" id="L229">		return adminSettings;</span>
	}

	/**
	 *  Gets the userId attribute of the UserDetails object
	 *
	 *@return    The userId value
	 */
	public int getUserId()
	{
<span class="fc" id="L239">		return userId;</span>
	}

	/**
	 *  Sets the userId attribute of the UserDetails object
	 *
	 *@param  userId  The new userId value
	 */
	public void setUserId(int userId)
	{
<span class="fc" id="L249">		this.userId = userId;</span>
<span class="fc" id="L250">	}</span>

	/**
	 *  Gets the fullName attribute of the UserDetails object
	 *
	 *@return    The fullName value
	 */
	@JsonIgnore
	public String getFullName()
	{
<span class="fc" id="L260">		String ret = &quot;&quot;;</span>

<span class="pc bpc" id="L262" title="5 of 6 branches missed.">		if (Constants.getBoolean(&quot;fullNameIncludeTitle&quot;) &amp;&amp; title != null &amp;&amp; title.length()&gt;0)</span>
		{
<span class="nc" id="L264">			ret = title + &quot; &quot;;</span>
		}
<span class="pc bpc" id="L266" title="1 of 4 branches missed.">		if (firstName != null &amp;&amp; firstName.length()&gt;0)</span>
		{
<span class="fc" id="L268">			ret += firstName + &quot; &quot;;</span>
		}
<span class="pc bpc" id="L270" title="1 of 4 branches missed.">		if (lastName != null &amp;&amp; lastName.length()&gt;0)</span>
		{
<span class="fc" id="L272">			ret += lastName + &quot; &quot;;</span>
		}

<span class="fc" id="L275">		return(ret.trim());</span>
	}

	/**
	 *  Gets the deliveryFullName attribute of the UserDetails object
	 *
	 *@return    The fullName value
	 */
	@JsonIgnore
	public String getDeliveryFullName()
	{
<span class="fc" id="L286">		String ret = &quot;&quot;;</span>

<span class="pc bpc" id="L288" title="1 of 4 branches missed.">		if (deliveryFirstName != null &amp;&amp; deliveryFirstName.length()&gt;0)</span>
		{
<span class="fc" id="L290">			ret += deliveryFirstName + &quot; &quot;;</span>
		}
<span class="pc bpc" id="L292" title="1 of 4 branches missed.">		if (deliveryLastName != null &amp;&amp; deliveryLastName.length()&gt;0)</span>
		{
<span class="fc" id="L294">			ret += deliveryLastName;</span>
		}

<span class="fc" id="L297">		return(ret.trim());</span>
	}

	/**
	 *  Sets the login attribute of the UserDetails object
	 *
	 *@param  login  The new login value
	 */
	public void setLogin(String login)
	{
<span class="fc" id="L307">		this.login = login;</span>
<span class="fc" id="L308">	}</span>

	/**
	 *  Gets the login attribute of the UserDetails object
	 *
	 *@return    The login value
	 */
	public String getLogin()
	{
<span class="fc" id="L317">		return login;</span>
	}

	/**
	 *  Sets the admin attribute of the UserDetails object
	 *
	 *@param  admin  The new admin value
	 */
	public void setAdmin(boolean admin)
	{
<span class="fc" id="L327">		this.admin = admin;</span>
<span class="fc" id="L328">	}</span>

	/**
	 *  Gets the admin attribute of the UserDetails object
	 *
	 *@return    The admin value
	 */
	public boolean isAdmin()
	{
<span class="fc" id="L337">		return admin;</span>
	}

	/**
	 *  Gets the adminString attribute of the UserDetails object
	 *
	 *@return    The adminString value
	 */
	@JsonIgnore
	public String getAdminString()
	{
<span class="fc" id="L348">		String ret = &quot;Admin=&quot;;</span>
<span class="fc bfc" id="L349" title="All 2 branches covered.">		if (admin)</span>
		{
<span class="fc" id="L351">			ret = ret + &quot;&lt;b&gt;Áno&lt;/b&gt;&quot;;</span>
		}
		else
		{
<span class="fc" id="L355">			ret = ret + &quot;Nie&quot;;</span>
		}
<span class="fc" id="L357">		return (ret);</span>
	}

	/**
	 *  Sets the company attribute of the UserDetails object
	 *
	 *@param  company  The new company value
	 */
	public void setCompany(String company)
	{
<span class="fc" id="L367">		this.company = company;</span>
<span class="fc" id="L368">	}</span>

	/**
	 *  Gets the company attribute of the UserDetails object
	 *
	 *@return    The company value
	 */
	public String getCompany()
	{
<span class="fc" id="L377">		return company;</span>
	}

	/**
	 *  Sets the adress attribute of the UserDetails object
	 *
	 *@param  adress  The new adress value
	 */
	public void setAdress(String adress)
	{
<span class="fc" id="L387">		this.adress = adress;</span>
<span class="fc" id="L388">	}</span>

	/**
	 *  Gets the adress attribute of the UserDetails object
	 *
	 *@return    The adress value
	 */
	public String getAdress()
	{
<span class="fc" id="L397">		return adress;</span>
	}

	/**
	 *  Sets the email attribute of the UserDetails object
	 *
	 *@param  email  The new email value
	 */
	public void setEmail(String email)
	{
<span class="pc bpc" id="L407" title="1 of 2 branches missed.">		if (email != null) email = email.toLowerCase();</span>
<span class="fc" id="L408">		this.email = email;</span>
<span class="fc" id="L409">	}</span>

	/**
	 *  Gets the email attribute of the UserDetails object
	 *
	 *@return    The email value
	 */
	public String getEmail()
	{
<span class="fc" id="L418">		return email;</span>
	}

	/**
	 *  Sets the pSC attribute of the UserDetails object
	 *
	 *@param  PSC  The new pSC value
	 */
	public void setPSC(String PSC)
	{
<span class="fc" id="L428">		this.zipCode = PSC;</span>
<span class="fc" id="L429">	}</span>

	/**
	 *  Gets the pSC attribute of the UserDetails object
	 *
	 *@return    The pSC value
	 */
	public String getPSC()
	{
<span class="fc" id="L438">		return zipCode;</span>
	}

	/**
	 *  Sets the country attribute of the UserDetails object
	 *
	 *@param  country  The new country value
	 */
	public void setCountry(String country)
	{
<span class="fc" id="L448">		this.country = country;</span>
<span class="fc" id="L449">	}</span>

	/**
	 *  Gets the country attribute of the UserDetails object
	 *
	 *@return    The country value
	 */
	public String getCountry()
	{
<span class="fc" id="L458">		return country;</span>
	}

	/**
	 *  Sets the phone attribute of the UserDetails object
	 *
	 *@param  phone  The new phone value
	 */
	public void setPhone(String phone)
	{
<span class="fc" id="L468">		this.phone = phone;</span>
<span class="fc" id="L469">	}</span>

	/**
	 *  Gets the phone attribute of the UserDetails object
	 *
	 *@return    The phone value
	 */
	public String getPhone()
	{
<span class="fc" id="L478">		return phone;</span>
	}

	/**
	 *  Sets the authorized attribute of the UserDetails object
	 *
	 *@param  authorized  The new authorized value
	 */
	public void setAuthorized(boolean authorized)
	{
<span class="fc" id="L488">		this.authorized = authorized;</span>
<span class="fc" id="L489">	}</span>

	/**
	 *  Gets the authorized attribute of the UserDetails object
	 *
	 *@return    The authorized value
	 */
	public boolean isAuthorized()
	{
<span class="fc" id="L498">		return authorized;</span>
	}
	public void setUserGroupsIds(String ugi)
	{
<span class="fc bfc" id="L502" title="All 2 branches covered.">		if (ugi==null) this.userGroupsIds=&quot;&quot;;</span>
<span class="fc" id="L503">		else this.userGroupsIds = ugi;</span>
<span class="fc" id="L504">	}</span>
	public String getUserGroupsIds()
	{
<span class="fc bfc" id="L507" title="All 2 branches covered.">		if (userGroupsIds==null) return &quot;&quot;;</span>
<span class="fc" id="L508">		return userGroupsIds;</span>
	}
	public void setUserGroupsNames(String userGroupsNames)
	{
<span class="fc" id="L512">		this.userGroupsNames = userGroupsNames;</span>
<span class="fc" id="L513">	}</span>
	public String getUserGroupsNames()
	{
<span class="fc" id="L516">		return userGroupsNames;</span>
	}
	public void setCity(String city)
	{
<span class="fc" id="L520">		this.city = city;</span>
<span class="fc" id="L521">	}</span>
	public String getCity()
	{
<span class="fc" id="L524">		return city;</span>
	}
	@JsonIgnore
	public String getPassword()
	{
<span class="fc" id="L529">		return password;</span>
	}
	public void setPassword(String password)
	{
<span class="fc" id="L533">		this.password = password;</span>
<span class="fc" id="L534">	}</span>

	/**
	 * Set password
	 * @param password
	 * @deprecated - user directly setPassword, it will be hashed in UsersDB.saveUser
	 */
	@Deprecated
	public void setPasswordPlain(String password)
	{
<span class="nc" id="L544">		this.password = password;</span>
<span class="nc" id="L545">	}</span>

	public void setLastLogon(String lastLogon)
	{
<span class="fc" id="L549">		this.lastLogon = lastLogon;</span>
<span class="fc" id="L550">	}</span>
	public void setLastLogonAsDate(Date lastLogonAsDate)
	{
<span class="fc bfc" id="L553" title="All 2 branches covered.">		this.lastLogonAsDate = lastLogonAsDate == null ? null : (Date) lastLogonAsDate.clone();</span>
<span class="fc" id="L554">	}</span>
	public String getLastLogon()
	{
<span class="fc" id="L557">		return lastLogon;</span>
	}
	public Date getLastLogonAsDate()
	{
<span class="fc bfc" id="L561" title="All 2 branches covered.">		return lastLogonAsDate == null ? null : (Date) lastLogonAsDate.clone();</span>
	}
	public String getTitle()
	{
<span class="fc" id="L565">		return title;</span>
	}
	public void setTitle(String title)
	{
<span class="fc" id="L569">		this.title = title;</span>
<span class="fc" id="L570">	}</span>
	public String getFirstName()
	{
<span class="fc" id="L573">		return firstName;</span>
	}
	public void setFirstName(String firstName)
	{
<span class="fc" id="L577">		this.firstName = firstName;</span>
<span class="fc" id="L578">	}</span>
	public String getLastName()
	{
<span class="fc" id="L581">		return lastName;</span>
	}
	public void setLastName(String lastName)
	{
<span class="fc" id="L585">		this.lastName = lastName;</span>
<span class="fc" id="L586">	}</span>

	public void splitFullName(String fullName)
	{
<span class="nc bnc" id="L590" title="All 2 branches missed.">		if (fullName == null)</span>
		{
<span class="nc" id="L592">			title = &quot;&quot;;</span>
<span class="nc" id="L593">			firstName = &quot;&quot;;</span>
<span class="nc" id="L594">			lastName = &quot;&quot;;</span>
<span class="nc" id="L595">			return;</span>
		}
<span class="nc" id="L597">		StringTokenizer st = new StringTokenizer(fullName);</span>
<span class="nc bnc" id="L598" title="All 2 branches missed.">		if (st.countTokens()&lt;2)</span>
		{
<span class="nc" id="L600">			this.setTitle(&quot;&quot;);</span>
<span class="nc" id="L601">			this.setFirstName(&quot;&quot;);</span>
<span class="nc" id="L602">			this.setLastName(fullName);</span>
		}
<span class="nc bnc" id="L604" title="All 2 branches missed.">		else if (st.countTokens()==2)</span>
		{
<span class="nc" id="L606">			this.setTitle(&quot;&quot;);</span>
<span class="nc" id="L607">			this.setFirstName(st.nextToken());</span>
<span class="nc" id="L608">			this.setLastName(st.nextToken());</span>
		}
<span class="nc bnc" id="L610" title="All 2 branches missed.">		else if (st.countTokens()&gt;2)</span>
		{
<span class="nc" id="L612">			this.setTitle(st.nextToken());</span>
<span class="nc" id="L613">			this.setFirstName(st.nextToken());</span>
<span class="nc" id="L614">			this.setLastName(st.nextToken());</span>
<span class="nc bnc" id="L615" title="All 2 branches missed.">			while (st.hasMoreTokens())</span>
			{
<span class="nc" id="L617">				this.setLastName(this.getLastName() + &quot; &quot; + st.nextToken());</span>
			}
		}
<span class="nc" id="L620">	}</span>


	public String getFieldA()
	{
<span class="fc" id="L625">		return fieldA;</span>
	}
	public void setFieldA(String fieldA)
	{
<span class="fc" id="L629">		this.fieldA = fieldA;</span>
<span class="fc" id="L630">	}</span>
	public String getFieldB()
	{
<span class="fc" id="L633">		return fieldB;</span>
	}
	public void setFieldB(String fieldB)
	{
<span class="fc" id="L637">		this.fieldB = fieldB;</span>
<span class="fc" id="L638">	}</span>
	public String getFieldC()
	{
<span class="fc" id="L641">		return fieldC;</span>
	}
	public void setFieldC(String fieldC)
	{
<span class="fc" id="L645">		this.fieldC = fieldC;</span>
<span class="fc" id="L646">	}</span>
	public String getFieldD()
	{
<span class="fc" id="L649">		return fieldD;</span>
	}
	public void setFieldD(String fieldD)
	{
<span class="fc" id="L653">		this.fieldD = fieldD;</span>
<span class="fc" id="L654">	}</span>
	public String getFieldE()
	{
<span class="fc" id="L657">		return fieldE;</span>
	}
	public void setFieldE(String fieldE)
	{
<span class="fc" id="L661">		this.fieldE = fieldE;</span>
<span class="fc" id="L662">	}</span>



	public long getRegDate()
	{
<span class="fc" id="L668">		return regDate;</span>
	}

	public void setRegDate(long regDate)
	{
<span class="fc" id="L673">		this.regDate = regDate;</span>
<span class="fc" id="L674">	}</span>



	public String getEmailAddress()
	{
<span class="fc" id="L680">		return email;</span>
	}

	public void setEmailAddress(String emailAddress)
	{
<span class="fc" id="L685">		this.email = emailAddress;</span>
<span class="fc" id="L686">	}</span>
	/**
	 * @return Returns the dateOfBirth.
	 */
	public String getDateOfBirth()
	{
<span class="fc" id="L692">		return dateOfBirth;</span>
	}
	/**
	 * @param dateOfBirth The dateOfBirth to set.
	 */
	public void setDateOfBirth(String dateOfBirth)
	{
<span class="fc" id="L699">		this.dateOfBirth = dateOfBirth;</span>
<span class="fc" id="L700">	}</span>
	/**
	 * @return Returns the photo.
	 */
	public String getPhoto()
	{
<span class="fc" id="L706">		return photo;</span>
	}
    @JsonIgnore
	public String getPhotoSmall()
	{
<span class="fc" id="L711">		return GalleryToolsForCore.getImagePathSmall(photo);</span>
	}

	@JsonIgnore
	public String getPhotoNormal()
	{
<span class="fc" id="L717">		return GalleryToolsForCore.getImagePathNormal(photo);</span>
	}

    @JsonIgnore
	public String getPhotoOriginal()
	{
<span class="fc" id="L723">		return GalleryToolsForCore.getImagePathOriginal(photo);</span>
	}
	/**
	 * @param photo The photo to set.
	 */
	public void setPhoto(String photo)
	{
<span class="fc" id="L730">		this.photo = photo;</span>
<span class="fc" id="L731">	}</span>

	/**
	 * @return Returns the sexMale.
	 */
	public boolean isSexMale()
	{
<span class="fc" id="L738">		return sexMale;</span>
	}
	/**
	 * @param sexMale The sexMale to set.
	 */
	public void setSexMale(boolean sexMale)
	{
<span class="fc" id="L745">		this.sexMale = sexMale;</span>
<span class="fc" id="L746">	}</span>
	/**
	 * @return Returns the signature.
	 */
	public String getSignature()
	{
<span class="fc" id="L752">		return signature;</span>
	}
	/**
	 * Vrati signaturu ako HTML kod s replace znackami ([img]...)
	 * @return
	 */
    @JsonIgnore
	public String getSignatureReplaced()
	{
<span class="fc" id="L761">		return ForumTools.replaceSignatureCodes(this);</span>
	}
	/**
	 * @param signature The signature to set.
	 */
	public void setSignature(String signature)
	{
<span class="fc" id="L768">		this.signature = signature;</span>
<span class="fc" id="L769">	}</span>

	public String getRegDateString()
	{
<span class="fc" id="L773">		String ret = &quot;&quot;;</span>
<span class="pc bpc" id="L774" title="1 of 2 branches missed.">		if	(this.regDate &gt; 0)</span>
<span class="fc" id="L775">			ret = Tools.formatDate(this.regDate);</span>

<span class="fc" id="L777">		return ret;</span>
	}
	/**
	 * @return Returns the forumRank.
	 */
    @JsonIgnore
	public int getForumRank()
	{
<span class="fc" id="L785">		return forumRank;</span>
	}
	/**
	 * @param forumRank The forumRank to set.
	 */
	public void setForumRank(int forumRank)
	{
<span class="fc" id="L792">		this.forumRank = forumRank;</span>
<span class="fc" id="L793">	}</span>
	/**
	 * @return Returns the ratingRank.
	 */
    @JsonIgnore
	public int getRatingRank()
	{
<span class="fc" id="L800">		return ratingRank;</span>
	}
	/**
	 * @param ratingRank The ratingRank to set.
	 */
	public void setRatingRank(int ratingRank)
	{
<span class="fc" id="L807">		this.ratingRank = ratingRank;</span>
<span class="fc" id="L808">	}</span>
	/**
	 * @return Returns the editableGroups.
	 */
	public String getEditableGroups()
	{
<span class="fc" id="L814">		return editableGroups;</span>
	}

	/**
	 * Returns editable groups for user, if empty, for multiweb it automatically add root groups for current domain
	 * @param addMultiwebCheck
	 * @return
	 */
	@JsonIgnore
	public String getEditableGroups(boolean addMultiwebCheck) {
<span class="pc bpc" id="L824" title="4 of 6 branches missed.">		if (addMultiwebCheck &amp;&amp; InitServlet.isTypeCloud() &amp;&amp; Tools.isEmpty(getEditableGroups())) {</span>
<span class="nc" id="L825">			return CloudToolsForCore.getRootGroupIds();</span>
		}
<span class="fc" id="L827">		return editableGroups;</span>
	}

	/**
	 * @param editableGroups The editableGroups to set.
	 */
	public void setEditableGroups(String editableGroups)
	{
<span class="fc" id="L835">		this.editableGroups = editableGroups;</span>
<span class="fc" id="L836">	}</span>
	/**
	 * @return Returns the editablePages.
	 */
	public String getEditablePages()
	{
<span class="fc" id="L842">		return editablePages;</span>
	}
	/**
	 * @param editablePages The editablePages to set.
	 */
	public void setEditablePages(String editablePages)
	{
<span class="fc" id="L849">		this.editablePages = editablePages;</span>
<span class="fc" id="L850">	}</span>
	/**
	 * @return Returns the writableFolders.
	 */
    @JsonIgnore
	public String getWritableFolders()
	{
<span class="fc bfc" id="L857" title="All 2 branches covered.">		if (writableFolders==null) return null;</span>
<span class="fc" id="L858">		return writableFolders.replace(' ', '\n');</span>
	}

	public List&lt;IwcmFile&gt; getWritableFoldersList()
	{
<span class="fc" id="L863">		List&lt;IwcmFile&gt; writableFoldersList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L864">		String writableFoldersString = getWritableFolders().trim();</span>
<span class="fc bfc" id="L865" title="All 2 branches covered.">		for (String folder : writableFoldersString.split(&quot;\n&quot;)) {</span>
<span class="fc" id="L866">			folder = folder.trim();</span>
<span class="fc bfc" id="L867" title="All 2 branches covered.">			if (Tools.isEmpty(folder)) {</span>
<span class="fc" id="L868">				continue;</span>
			}
<span class="fc" id="L870">			writableFoldersList.add(IwcmFile.fromVirtualPath(folder));</span>
		}
<span class="fc" id="L872">		return writableFoldersList;</span>
	}

	/**
	 * @param writableFolders The writableFolders to set.
	 */
	public void setWritableFolders(String writableFolders)
	{
<span class="pc bpc" id="L880" title="1 of 2 branches missed.">		if (writableFolders!=null) this.writableFolders = writableFolders.replace(' ', '\n');</span>
<span class="nc" id="L881">		else this.writableFolders = null;</span>
<span class="fc" id="L882">	}</span>

	public String getAllowLoginEnd()
	{
<span class="fc" id="L886">		return allowLoginEnd;</span>
	}

	public void setAllowLoginEnd(String allowLoginEnd)
	{
<span class="fc" id="L891">		this.allowLoginEnd = allowLoginEnd;</span>
<span class="fc" id="L892">	}</span>

	public String getAllowLoginStart()
	{
<span class="fc" id="L896">		return allowLoginStart;</span>
	}

	public void setAllowLoginStart(String allowLoginStart)
	{
<span class="fc" id="L901">		this.allowLoginStart = allowLoginStart;</span>
<span class="fc" id="L902">	}</span>

	/**
	 * Pozor musi byt naplnene, nedetekuje samo!!!
	 * @return
	 */
	public boolean isAllowDateLogin()
	{
<span class="fc" id="L910">		return allowDateLogin;</span>
	}

	public void setAllowDateLogin(boolean allowDateLogin)
	{
<span class="fc" id="L915">		this.allowDateLogin = allowDateLogin;</span>
<span class="fc" id="L916">	}</span>

	public void addToGroup(int groupId)
	{
<span class="fc" id="L920">		String ret = getUserGroupsIds();</span>
<span class="fc bfc" id="L921" title="All 2 branches covered.">		if(!isInUserGroup(groupId)) {</span>
<span class="fc" id="L922">			ret += &quot;,&quot;+groupId;</span>
		}
<span class="fc bfc" id="L924" title="All 2 branches covered.">		if(ret.startsWith(&quot;,&quot;)) ret = ret.substring(1);</span>
<span class="fc" id="L925">		setUserGroupsIds(ret);</span>
<span class="fc" id="L926">	}</span>
	public void removeFromGroup(int groupId)
	{
<span class="fc bfc" id="L929" title="All 2 branches covered.">		if(isInUserGroup(groupId))</span>
		{
<span class="fc" id="L931">			String res=&quot;&quot;;</span>
<span class="fc" id="L932">			StringTokenizer st = new StringTokenizer(getUserGroupsIds(),&quot;,&quot;);</span>
<span class="fc" id="L933">			StringBuilder resBuf = new StringBuilder(res);</span>
<span class="fc bfc" id="L934" title="All 2 branches covered.">			while(st.hasMoreTokens())</span>
			{
<span class="fc" id="L936">				String group = st.nextToken();</span>
<span class="fc bfc" id="L937" title="All 2 branches covered.">				if(!group.equals(String.valueOf(groupId))) resBuf.append(group).append(',');</span>
<span class="fc" id="L938">			}</span>
<span class="fc" id="L939">			res = resBuf.toString();</span>
<span class="pc bpc" id="L940" title="1 of 2 branches missed.">			if(res.startsWith(&quot;,&quot;)) res = res.substring(1);</span>
<span class="fc bfc" id="L941" title="All 2 branches covered.">			if(res.endsWith(&quot;,&quot;)) res = res.substring(0,res.length()-1);</span>
<span class="fc bfc" id="L942" title="All 2 branches covered.">			if(Tools.isEmpty(res))</span>
			{
<span class="fc" id="L944">				setUserGroupsIds(null);</span>
			}
			else
			{
<span class="fc" id="L948">				setUserGroupsIds(res);</span>
			}
		}
<span class="fc" id="L951">	}</span>

    @JsonIgnore
	public UserGroupVerify getUserGroupVerify() {
<span class="nc bnc" id="L955" title="All 2 branches missed.">		if(userGroupVerify != null)</span>
		{
<span class="nc" id="L957">			return userGroupVerify;</span>
		}
		else
		{
<span class="nc" id="L961">			userGroupVerify = UsersDB.getUserGroupVerify(userId);</span>
		}
<span class="nc" id="L963">		return userGroupVerify;</span>
	}

	public String getDeliveryCity() {
<span class="fc" id="L967">		return deliveryCity;</span>
	}

	public void setDeliveryCity(String deliveryCity) {
<span class="fc" id="L971">		this.deliveryCity = deliveryCity;</span>
<span class="fc" id="L972">	}</span>

	public String getDeliveryCompany() {
<span class="fc" id="L975">		return deliveryCompany;</span>
	}

	public void setDeliveryCompany(String deliveryCompany) {
<span class="fc" id="L979">		this.deliveryCompany = deliveryCompany;</span>
<span class="fc" id="L980">	}</span>

	public String getDeliveryCountry() {
<span class="fc" id="L983">		return deliveryCountry;</span>
	}

	public void setDeliveryCountry(String deliveryCountry) {
<span class="fc" id="L987">		this.deliveryCountry = deliveryCountry;</span>
<span class="fc" id="L988">	}</span>

	public String getDeliveryFirstName() {
<span class="fc" id="L991">		return deliveryFirstName;</span>
	}

	public void setDeliveryFirstName(String deliveryFirstName) {
<span class="fc" id="L995">		this.deliveryFirstName = deliveryFirstName;</span>
<span class="fc" id="L996">	}</span>

	public String getDeliveryLastName() {
<span class="fc" id="L999">		return deliveryLastName;</span>
	}

	public void setDeliveryLastName(String deliveryLastName) {
<span class="fc" id="L1003">		this.deliveryLastName = deliveryLastName;</span>
<span class="fc" id="L1004">	}</span>

	public String getDeliveryPhone() {
<span class="fc" id="L1007">		return deliveryPhone;</span>
	}

	public void setDeliveryPhone(String deliveryPhone) {
<span class="fc" id="L1011">		this.deliveryPhone = deliveryPhone;</span>
<span class="fc" id="L1012">	}</span>

	public String getDeliveryPsc() {
<span class="fc" id="L1015">		return deliveryPsc;</span>
	}

	public void setDeliveryPsc(String deliveryPsc) {
<span class="fc" id="L1019">		this.deliveryPsc = deliveryPsc;</span>
<span class="fc" id="L1020">	}</span>

	public String getDeliveryAdress() {
<span class="fc" id="L1023">		return deliveryAdress;</span>
	}

	public void setDeliveryAdress(String deliveryAdress) {
<span class="fc" id="L1027">		this.deliveryAdress = deliveryAdress;</span>
<span class="fc" id="L1028">	}</span>

	public String getFax() {
<span class="pc bpc" id="L1031" title="1 of 2 branches missed.">		if (Constants.getString(&quot;usersFaxList&quot;).startsWith(&quot;enumeration_&quot;)) {</span>
<span class="nc bnc" id="L1032" title="All 4 branches missed.">			if (Tools.isNotEmpty(fax) &amp;&amp; Tools.isNumeric(fax)) {</span>
<span class="nc" id="L1033">				String pos = fax.trim();</span>
<span class="nc" id="L1034">				String res = EnumerationDataDB.getString1(Tools.getIntValue(pos,-1));</span>
<span class="nc" id="L1035">				return res;</span>
			}
		}
<span class="fc" id="L1038">		return fax;</span>
	}

	public void setFax(String fax) {
<span class="fc" id="L1042">		this.fax = fax;</span>
<span class="fc" id="L1043">	}</span>

	public void setFaxId(String faxId) {
<span class="pc bpc" id="L1046" title="3 of 4 branches missed.">		if (Tools.isNumeric(faxId) &amp;&amp; Constants.getString(&quot;usersFaxList&quot;).startsWith(&quot;enumeration_&quot;))</span>
<span class="nc" id="L1047">			this.fax = faxId;</span>
<span class="fc" id="L1048">	}</span>

	public String getFaxId() {
<span class="fc" id="L1051">		return fax;</span>
	}

	public void setZip(String zip)
	{
<span class="fc" id="L1056">		this.zipCode = zip;</span>
<span class="fc" id="L1057">	}</span>

	public String getZip()
	{
<span class="fc" id="L1061">		return this.zipCode;</span>
	}

	public void setSettings(Map&lt;String, SettingsBean&gt; settings)
	{
<span class="fc" id="L1066">		this.settings = settings;</span>
<span class="fc" id="L1067">	}</span>

	public void setAdminSettings(Map&lt;String, SettingsAdminBean&gt; adminSettings)
	{
<span class="fc" id="L1071">		this.adminSettings = adminSettings;</span>
<span class="fc" id="L1072">	}</span>

	public boolean isSettingsDontSave()
	{
<span class="fc" id="L1076">		return settingsDontSave;</span>
	}

	public void setSettingsDontSave(boolean settingsDontSave)
	{
<span class="fc" id="L1081">		this.settingsDontSave = settingsDontSave;</span>
<span class="fc" id="L1082">	}</span>

	public String getPosition() {
<span class="pc bpc" id="L1085" title="1 of 2 branches missed.">	    if (Constants.getString(&quot;usersPositionList&quot;).startsWith(&quot;enumeration_&quot;)) {</span>
<span class="nc bnc" id="L1086" title="All 4 branches missed.">            if (Tools.isNotEmpty(position) &amp;&amp; Tools.isNumeric(position)) {</span>
<span class="nc" id="L1087">                String pos = position.trim();</span>
<span class="nc" id="L1088">                String res = EnumerationDataDB.getString1(Tools.getIntValue(pos,-1));</span>
<span class="nc" id="L1089">                return res;</span>
            }
        }
<span class="fc" id="L1092">        return position;</span>
	}

	public String getPositionId() {
<span class="fc" id="L1096">	    return position;</span>
    }

    public void setPositionId(String positionId) {
<span class="pc bpc" id="L1100" title="3 of 4 branches missed.">		if (Tools.isNumeric(positionId) &amp;&amp; Constants.getString(&quot;usersPositionList&quot;).startsWith(&quot;enumeration_&quot;))</span>
<span class="nc" id="L1101">			this.position = positionId;</span>
<span class="fc" id="L1102">	}</span>

	public void setPosition(String position) {
<span class="pc bpc" id="L1105" title="1 of 2 branches missed.">        if (Constants.getString(&quot;usersPositionList&quot;).startsWith(&quot;enumeration_&quot;)) {</span>
<span class="nc bnc" id="L1106" title="All 4 branches missed.">            if (Tools.isNotEmpty(position) &amp;&amp; Tools.isNumeric(position) == false) {</span>
<span class="nc" id="L1107">                String pos = position.trim();</span>
<span class="nc" id="L1108">                int enumerationId = Tools.getIntValue(Constants.getString(&quot;usersPositionList&quot;).substring(Constants.getString(&quot;usersPositionList&quot;).indexOf(&quot;_&quot;) + 1), 0);</span>
<span class="nc" id="L1109">                List&lt;EnumerationDataBean&gt; enumerationDataBeanList = EnumerationDataDB.getEnumerationDataBy(pos, enumerationId);</span>
<span class="nc bnc" id="L1110" title="All 4 branches missed.">                if (enumerationDataBeanList != null &amp;&amp; enumerationDataBeanList.size() &gt; 0) {</span>
<span class="nc" id="L1111">                    this.position = String.valueOf(enumerationDataBeanList.get(0).getId());</span>
                } else {
<span class="nc" id="L1113">                    this.position = position;</span>
                }
<span class="nc" id="L1115">                return;</span>
            }
        }
<span class="fc" id="L1118">	    this.position = position;</span>
<span class="fc" id="L1119">	}</span>

	public int getParentId()
	{
<span class="fc" id="L1123">		return parentId;</span>
	}

	public void setParentId(int parentId)
	{
<span class="fc" id="L1128">		this.parentId = parentId;</span>
<span class="fc" id="L1129">	}</span>

	@JsonIgnore
	public String getSalt()
	{
<span class="fc" id="L1134">		return salt;</span>
	}

	public void setSalt(String salt)
	{
<span class="fc" id="L1139">		this.salt = salt;</span>
<span class="fc" id="L1140">	}</span>

	@Override
	public String toString()
	{
		// RHR -&gt; uprava na format JSON kvoli tomu ze sa vyuziva v inventory stripes
<span class="fc" id="L1146">		StringBuilder toString = new StringBuilder();</span>
<span class="fc" id="L1147">		toString.append(&quot;{&quot;);</span>
<span class="fc" id="L1148">		toString.append(&quot; \&quot;UserDetails\&quot; : {&quot;);</span>
<span class="fc" id="L1149">		toString.append(&quot;\&quot;userId\&quot; : \&quot;&quot; + getUserId() + &quot;\&quot;,&quot;);</span>
<span class="fc" id="L1150">		toString.append(&quot;\&quot;fax\&quot; : \&quot;&quot; + getFax() + &quot;\&quot;,&quot;);</span>
<span class="fc" id="L1151">		toString.append(&quot;\&quot;faxId\&quot; : \&quot;&quot; + getFaxId() + &quot;\&quot;,&quot;);</span>
<span class="fc" id="L1152">		toString.append(&quot;\&quot;fullName\&quot; : \&quot;&quot; + getFullName() + &quot;\&quot;,&quot;);</span>
<span class="fc" id="L1153">		toString.append(&quot;\&quot;isAdmin\&quot; : \&quot;&quot; + isAdmin() + &quot;\&quot;&quot;);</span>
<span class="fc" id="L1154">		toString.append(&quot;} &quot;);</span>
<span class="fc" id="L1155">		toString.append(&quot;} &quot;);</span>
<span class="fc" id="L1156">		return toString.toString();</span>
	}

    @Override
    public boolean equals(Object obj) {
<span class="nc bnc" id="L1161" title="All 4 branches missed.">        return obj instanceof UserDetails &amp;&amp; this.getUserId() == ((UserDetails) obj).getUserId();</span>
    }

    /**
	 * Zisti, ci pouzivatel moze zapisovat subory do zadaneho adresara
	 * @param folder
	 * @return
	 */
	public boolean isFolderWritable(String folder)
	{
<span class="fc" id="L1171">		return UsersDB.isFolderWritable(getWritableFolders(), folder);</span>
	}

	@JsonIgnore
	public String getMobileDevice()
	{
<span class="fc" id="L1177">		return mobileDevice;</span>
	}

	public void setMobileDevice(String mobileDevice)
	{
<span class="fc" id="L1182">		this.mobileDevice = mobileDevice;</span>
<span class="fc" id="L1183">	}</span>

	public String getOldPassword() {
<span class="fc" id="L1186">		return oldPassword;</span>
	}

	public void setOldPassword(String oldPassword) {
<span class="fc" id="L1190">		this.oldPassword = oldPassword;</span>
<span class="fc" id="L1191">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>