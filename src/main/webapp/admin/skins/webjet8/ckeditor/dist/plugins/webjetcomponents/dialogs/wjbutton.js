CKEDITOR.dialog.add("wjbuttonDialog",function(c){function e(a){var b={size:"",type:"",custom:[]};(a.getAttribute("class")||"").split(/\s+/).forEach(function(a){a!==f&&(-1!==g.indexOf(a)?b.size=a:-1!==h.indexOf(a)?b.type=a:b.custom.push(a))});return b}function m(a,b,c){var d=[f];a&&d.push(a);b&&d.push(b);c&&(a=c.split(/\s+/).filter(function(a){return a&&a!==f&&-1===g.indexOf(a)&&-1===h.indexOf(a)?!0:!1}),d=d.concat(a));return d.join(" ")}var g=((c.config.webjetsvgicon||{}).sizes||"btn-lg,btn-sm").split(","),
f=c.config.webjetformbutton&&c.config.webjetformbutton.baseClass||"btn",h=c.config.webjetformbutton&&c.config.webjetformbutton.types?c.config.webjetformbutton.types.split(","):"btn-primary btn-secondary btn-success btn-danger btn-warning btn-info btn-light btn-dark btn-link btn-outline-primary btn-outline-secondary btn-outline-success btn-outline-danger btn-outline-warning btn-outline-info btn-outline-light btn-outline-dark".split(" "),k=[[c.lang.webjetformbutton.defaultSize,""]];g.forEach(function(a){k.push([a,
a])});var l=[[c.lang.webjetformbutton.defaultType,""]];h.forEach(function(a){l.push([a,a])});return{title:c.lang.webjetcomponents.wjbutton.title,minWidth:450,minHeight:200,contents:[{id:"tab-basic",elements:[{type:"text",id:"button-text",label:c.lang.webjetcomponents.wjbutton.text,validate:CKEDITOR.dialog.validate.notEmpty("Text field cannot be empty."),setup:function(a){this.setValue(a.getHtml())},commit:function(a){a.setHtml(this.getValue())}},{type:"hbox",padding:0,widths:["95%","5%"],children:[{type:"text",
id:"url",label:c.lang.webjetcomponents.wjbutton.url,setup:function(a){this.setValue(a.getAttribute("href"))},commit:function(a){var b=this.getValue();a.setAttribute("href",b);a.removeAttribute("data-cke-saved-href");0==b.indexOf("http")||0==b.indexOf("www.")?a.setAttribute("rel","nofollow noopener noreferrer"):"nofollow noopener noreferrer"==a.getAttribute("rel")&&a.removeAttribute("rel")}},{type:"html",html:'\x26nbsp;\x3cbr/\x3e\x3ci style\x3d"margin-top:15px; margin-left: 8px;display: block; font-size: 18px; cursor: pointer;" onclick\x3d"openLinkDialogWindow(\'ckEditorDialog\', \'tab-basic:url\');" class\x3d"wj-action-icon ti ti-focus-2"\x3e\x3c/i\x3e'}]},
{type:"select",id:"target",label:c.lang.webjetcomponents.wjbutton.target,style:"width:100%","default":"",setup:function(a){var b=a.getAttribute("target");if(void 0==b||null==b||""==b)a=a.getAttribute("href"),"undefined"==typeof a||null==a||0!=a.indexOf("http")&&0!=a.indexOf("www.")&&0!=a.indexOf("/files/")||(b="_blank");this.setValue(b)},commit:function(a){var b=this.getValue();""==b?(b=this.getDialog().getContentElement("tab-basic","url").getValue(),0==b.indexOf("http")||0==b.indexOf("www.")||0==
b.indexOf("/files/")?a.setAttribute("target","_blank"):a.removeAttribute("target")):a.setAttribute("target",b)},items:[[""],["_self"],["_blank"]]},{type:"select",id:"buttonType",label:c.lang.webjetformbutton.buttonType,"default":"",items:l,setup:function(a){a=e(a);this.setValue(a.type)}},{type:"select",id:"size",label:c.lang.webjetformbutton.size,"default":"",items:k,setup:function(a){a=e(a);this.setValue(a.size)}},{type:"text",id:"customClass",label:c.lang.webjetformbutton.customClass,setup:function(a){a=
e(a);this.setValue(a.custom.join(" "))}}]}],onShow:function(){var a=c.getSelection().getStartElement();"undefined"!=typeof ckEditorInstance.lastWjButton&&null!=ckEditorInstance.lastWjButton&&(a=new CKEDITOR.dom.element(ckEditorInstance.lastWjButton),ckEditorInstance.lastWjButton=null);a?this.insertMode=!1:(a=c.document.createElement("a"),a.setAttribute("class","wj-button"),a.setAttribute("style","display:inline-block;background-color:#27AE61;border:1px solid #27AE61;color:#fff !important;padding:5px 10px;border-radius:5px;font-size:14px;text-decoration: none !important; cursor: pointer;"),
a.setText("Text"),this.insertMode=!0);this.element=a;this.setupContent(this.element)},onOk:function(){var a=this.element;this.commitContent(a);var b=this.getValueOf("tab-basic","size"),e=this.getValueOf("tab-basic","buttonType"),d=this.getValueOf("tab-basic","customClass"),b=m(b,e,d);a.setAttribute("class",b);this.insertMode&&c.insertElement(a)}}});