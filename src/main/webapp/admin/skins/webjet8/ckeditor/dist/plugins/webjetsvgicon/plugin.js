CKEDITOR.plugins.add("webjetsvgicon",{requires:"dialog",icons:"svgicon",lang:"sk,en,cs",init:function(a){a.addCommand("webjetsvgicon",new CKEDITOR.dialogCommand("svgiconDialog"));a.ui.addButton("WebjetSvgIcon",{label:a.lang.webjetsvgicon.buttonLabel,command:"webjetsvgicon",toolbar:"insert",icon:this.path+"icons/svgicon.svg"});CKEDITOR.dialog.add("svgiconDialog",this.path+"dialogs/svgicon.js");a.filter.allow({svg:{attributes:"!*",children:!0},use:{attributes:"!*"}});a.on("contentDom",function(){var d=
a.editable();d.attachListener(d,"mousedown",function(b){try{var c=b.data.$.target;if("SVG"==c.tagName.toUpperCase()||"USE"==c.tagName.toUpperCase()&&"SVG"==c.parentNode.tagName.toUpperCase()){var e="SVG"==c.tagName.toUpperCase()?c:c.parentNode;if(!1!==e.classList.contains("icon"))if(0===b.data.$.button){var d=a.document.find(".svg-icon-selected");for(b=0;b<d.count();b++)d.getItem(b).removeClass("svg-icon-selected");e.classList.add("svg-icon-selected");a.execCommand("webjetsvgicon")}else 2===b.data.$.button&&
(b.data.$.preventDefault(),b.data.$.stopPropagation(),confirm(a.lang.webjetsvgicon.deleteConfirm||"Do you want to delete this icon?")&&((new CKEDITOR.dom.element(e)).remove(),a.fire("change")))}}catch(f){console.error("Error in webjetsvgicon mouseup handler",f)}})})}});