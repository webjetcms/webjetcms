<script>
	function appAfterInit(response, datatable) {
		window.addEventListener("WJ.DTE.opened", function (e) {

			function toggleLoopNumber() {
				const selected = $("#DTE_Field_display_mode").val();
				if (selected === "2") {
					$(".DTE_Field_Name_loop_number").show();
				} else {
					$(".DTE_Field_Name_loop_number").hide();
				}
			}

			toggleLoopNumber();

			$("#DTE_Field_display_mode").on("change", toggleLoopNumber);

			function updateImageFromSelect() {
				var selectedValue = $("#DTE_Field_skin").val();
				var newImage = '<img id="DTE_Field_styleImageIMG" src="/components/carousel_slider/admin-styles/' + selectedValue + '.jpg" style="width: 100%; margin-top: 7px; border: 4px solid #4286f4;">';
                $("#DTE_Field_styleImageIMG").html(newImage);
			}

            updateImageFromSelect();
			$("#DTE_Field_skin").on("change", updateImageFromSelect);
		});
	}

	function appGetComponentCode(componentPath, params, componentDatatable) {
        let include = "!INCLUDE(" + componentPath;

        // JTVCJTVE is base64 for []
		let editorData = localStorage.getItem("tableLines");
		if(editorData == undefined || editorData == null || editorData == "null") editorData = "JTVCJTVE";
        params.editorData = editorData;

        if (Object.keys(params).length > 0) {
            include += ", " + convertObjectToInludeParams(params);
        }
        include += ")!";
        return include;
    }
</script>