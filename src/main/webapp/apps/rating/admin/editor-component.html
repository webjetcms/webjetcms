<script>
	function appGetComponentPath(componentPath, datatable) {
		let field = $("#DTE_Field_ratingType").val();
		if ("rating_form" === field) {
			return "/components/rating/rating_form.jsp";
		} else if ("rating_page" === field) {
			return "/components/rating/rating_page.jsp";
		} else if ("rating_top_users" === field) {
			return "/components/rating/rating_top_users.jsp";
		}
		return "/components/rating/rating_top_pages.jsp";
	}

	function appAfterInit(response, datatable) {
		const setFieldsVisibility = (fieldsToHide = [], fieldsToShow = []) => {
			fieldsToHide.forEach((name) => $(`.DTE_Field_Name_${name}`).hide());
			fieldsToShow.forEach((name) => $(`.DTE_Field_Name_${name}`).show());
		};

		window.addEventListener("WJ.DTE.opened", function (e) {
			const fieldElement = $("#DTE_Field_ratingType");
            
			fieldElement.on("change", function () {
                const field = $(this).val();
				if ("rating_form" === field) {
                    setFieldsVisibility(['usersLength', 'docsLength', 'period'], ['checkLogon', 'ratingDocId', 'range']);
				} else if ("rating_page" === field) {
					setFieldsVisibility(['usersLength', 'docsLength', 'period','checkLogon'], ['ratingDocId', 'range']);
				} else if ("rating_top_users" === field) {
					setFieldsVisibility(['docsLength', 'period', 'ratingDocId', 'range', 'checkLogon'],['usersLength']);
				} else {
                    setFieldsVisibility(['usersLength','ratingDocId', 'range', 'checkLogon'],['docsLength', 'period']);
                }
			});
			fieldElement.trigger("change");
		});
	}
</script>
