<script>
	function appAfterInit(response, datatable) {
		window.addEventListener("WJ.DTE.opened", function () {
			const $customNameFieldWrapper = $(".DTE_Field_Name_customName");
			const $customNameInput = $customNameFieldWrapper.find("input");
			const $titleNameCustom = $("#DTE_Field_titleName_2");
			const $titleNameRadios = $(
				"#DTE_Field_titleName_0, #DTE_Field_titleName_1, #DTE_Field_titleName_2"
			);
			const updateCustomNameVisibility = () => {
				const isCustom = $titleNameCustom.is(":checked");
				$customNameFieldWrapper.toggle(isCustom);
				if (!isCustom) {
					$customNameInput.val("");
				}
			};
			const customNameValue = $customNameInput.val();
			if (customNameValue && !$titleNameCustom.is(":checked")) {
				$titleNameCustom.prop("checked", true).trigger("change");
			}
			$titleNameRadios.on("change", updateCustomNameVisibility);
			updateCustomNameVisibility();
		});
	}
	function appGetComponentCode(componentPath, params, datatable) {
		if (params["titleName"] === "customName") {
			params["titleName"] = params["customName"];
		}
		let include = "!INCLUDE(" + componentPath;
		if (Object.keys(params).length > 0) {
			include += ", " + convertObjectToInludeParams(params);
		}
		include += ")!";
		return include;
	}
</script>
