<script>
    function appAfterInit(response, datatable) {
        //console.log("appAfterInit, response=", response, "datatable=", datatable);

        const setFieldsVisibility = (fieldsToHide = [], fieldsToShow = []) => {
            fieldsToHide.forEach((name) => $(`.DTE_Field_Name_${name}`).hide());
            fieldsToShow.forEach((name) => $(`.DTE_Field_Name_${name}`).show());
        };

        window.addEventListener("WJ.DTE.opened", function(e) {
            const fieldElement = $("#DTE_Field_showInIframe_0");

            fieldElement.on("change", function() {
                const isChecked = $(this).prop("checked");
                switch (isChecked) {
                    case true:
                        setFieldsVisibility([], ['refreshRate', 'explain2', 'iframeWidth', 'iframeHeight']);
                        break;
                    default:
                        setFieldsVisibility(['refreshRate', 'explain2', 'iframeWidth', 'iframeHeight'], []);
                        break;
                }
            });
            fieldElement.trigger("change");
            const fieldElement2 = $(".DTE_Field_Name_displayMode");
            fieldElement2.on("click", function() {
                const isChecked = $("#DTE_Field_displayMode_0").prop("checked");
                switch (isChecked) {
                    case true:
                        setFieldsVisibility([], ['bannerIndex', 'explain']);
                        break;
                    default:
                        setFieldsVisibility(['bannerIndex', 'explain'], []);
                        break;
                }
            });
            fieldElement2.trigger("click");
        });
    }
</script>
